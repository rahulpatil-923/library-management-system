<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>View Books</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/style.css" />
    <style>
      .btn-warning {
        padding: 0.2rem 0.5rem; /* Minimized padding */
      }
      .col-md-9 {
        margin-left: 0; /* Removed margin between sidebar and table */
      }
    </style>
  </head>
  <body>
    <%- include('navbar') %>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3 p-0"><%- include('sidebar') %></div>
        <div class="col-md-9">
          <h2 class="mb-4 text-light">All Books</h2>
          <div class="table-responsive">
            <table class="table table-bordered table-striped bg-white">
              <thead class="table-dark">
                <tr>
                  <th>#</th>
                  <th>Title</th>
                  <th>Author</th>
                  <th>Publisher</th>
                  <th>ISBN</th>
                  <th>Category</th>
                  <th>Total Copies</th>
                  <th>Available Copies</th>
                  <th>Status</th>
                  <th>Image</th>
                  <th>Added On</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <% if (books && books.length > 0) { %> <%
                books.forEach(function(book, idx) { %>
                <tr>
                  <td><%= idx + 1 %></td>
                  <td><%= book.title %></td>
                  <td><%= book.author %></td>
                  <td><%= book.publisher %></td>
                  <td><%= book.isbn %></td>
                  <td><%= book.category %></td>
                  <td><%= book.total_copies %></td>
                  <td><%= book.available_copies %></td>
                  <td><%= book.status %></td>
                  <td>
                    <% if (book.image) { %>
                    <img
                      src="/<%= book.image %>"
                      alt="Book Image"
                      style="width: 60px; height: 60px; object-fit: cover"
                    />
                    <% } else { %> N/A <% } %>
                  </td>
                  <td>
                    <%= book.created_at ?
                    book.created_at.toISOString().slice(0,10) : '' %>
                  </td>
                  <td>
                    <a
                      href="/books/update/<%= book.id %>"
                      class="btn ms-1 btn-warning px-1"
                      >Update</a
                    >
                  </td>
                </tr>
                <% }) %> <% } else { %>
                <tr>
                  <td colspan="12">No books found.</td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
